<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>สมาชิกสภาผู้แทนราษฎร | พรรคประชาภิวัฒน์ (PRT)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link rel="stylesheet" href="https://slw-system.pages.dev/assets/css/font-face.css">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        /* เพิ่มสไตล์เฉพาะสำหรับหน้านี้ */
        .mps-hero {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('../images/mps-bg.jpg') no-repeat center center;
            background-size: cover;
            color: white;
            padding: 100px 0;
            text-align: center;
        }
        
        span.mp-badge.former {
            display: none;
        }
        
        .mps-hero h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #60cb30;
        }
        
        .mps-hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        
        .mps-section {
            padding-top: 60px;
            padding-bottom: 6px;
        }
        
        .mps-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            border-bottom: 1px solid #ddd;
        }

        .btn {
            cursor: pointer;
        }
        
        .tab-btn {
            padding: 10px 25px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .tab-btn.active {
            border-bottom: 3px solid #60cb30;
            color: #60cb30;
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .mps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }
        
        .mp-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .mp-card:hover {
            transform: translateY(-5px);
        }
        
        .mp-image {
            overflow: hidden;
            position: relative;
        }
        
        .mp-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .mp-card:hover .mp-image img {
            transform: scale(1.05);
        }
        
        .mp-image-container {
            display: flex;
            flex-direction: column;
        }
        
        .mp-constituency {
            background-color: #ff014f;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            width: fit-content;
            margin-bottom: 20px;
        }
        
        span.mp-badge.constituency {
            text-align: center;
            margin-top: 10px;
            font-weight: 600;
            display: none;
        }
        
        .mp-info {
            padding: 20px;
        }
        
        .mp-name {
            font-size: 1.3rem;
            margin-bottom: 5px;
            color: #333;
        }
        
        .mp-party {
            color: #60cb30;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .mp-performance {
            margin-top: 15px;
        }
        
        .performance-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .performance-label {
            color: #666;
        }
        
        .performance-value {
            font-weight: bold;
        }
        
        .view-profile {
            display: inline-block;
            margin-top: 15px;
            padding: 8px 20px;
            background-color: #60cb30;
            color: white;
            border-radius: 30px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: background-color 0.3s ease;
        }
        
        .view-profile:hover {
            background-color: #4da826;
        }
        
        .debates-section {
            background-color: #f9f9f9;
            padding: 40px 0;
            margin-top: 30px;
        }
        
        .debates-container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .debate-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .debate-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .debate-title {
            font-size: 1.2rem;
            color: #333;
            margin: 0;
        }
        
        .debate-date {
            color: #ff014f;
            font-size: 0.9rem;
        }
        
        .debate-mp {
            color: #60cb30;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .debate-excerpt {
            color: #666;
            margin-bottom: 15px;
        }
        
        .watch-btn {
            display: inline-block;
            padding: 6px 15px;
            background-color: #ff014f;
            color: white;
            border-radius: 4px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: background-color 0.3s ease;
            margin-top: 5px;
        }
        
        .watch-btn:hover {
            background-color: #d80043;
        }
        
        .watch-btn a {
            color: #fff;
        }
        
        @media (max-width: 768px) {
            .mps-hero {
                padding: 80px 0;
            }
            
            .mps-hero h1 {
                font-size: 2rem;
            }
            
            .mps-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .mps-tabs {
                flex-wrap: wrap;
            }
            
            .tab-btn {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header id="header">
        <div class="container flex-header">
            <div class="logo">
                <a href="index.html">
                    <!-- <img src="images/logo.png" alt="พรรคประชาภิวัฒน์"> -->
                    พรรคประชาภิวัฒน์
                </a>
            </div>
            <nav class="main-nav">
                <ul class="nav-list">
                    <li><a href="index.html">หน้าหลัก</a></li>
                    <li class="has-submenu">
                        <a>เลือกตั้ง <i class="fas fa-chevron-down"></i></a>
                        <ul class="submenu">
                            <li><a href="election.html">ผู้สมัคร สส.</a></li>
                            <li><a href="policy.html">นโยบาย</a></li>
                        </ul>
                    </li>
                    <li class="has-submenu">
                        <a>เกี่ยวกับพรรค <i class="fas fa-chevron-down"></i></a>
                        <ul class="submenu">
                            <li><a href="ideology.html">อุดมการณ์</a></li>
                            <li><a href="executives.html">ผู้บริหารพรรค</a></li>
                            <li><a href="announcements.html">ประกาศ</a></li>
                            <li><a href="https://drive.google.com/file/d/1qGXgxyuI_jM6k2DB67PjfeqEx4EQqDY0/view?usp=sharing" target="_blank">ข้อบังคับพรรค</a></li>
                        </ul>
                    </li>
                    <li><a href="mps.html">สส.พรรค</a></li>
                    <li><a href="member.html">ระบบสมาชิก</a></li>
                </ul>
            </nav>
            <button class="hamburger" id="hamburger">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <button class="close-btn" id="closeMenu">
            <i class="fa-solid fa-xmark"></i>
        </button>
        <ul class="mobile-nav-list">
            <li><a href="index.html">หน้าหลัก</a></li>
            <li class="mobile-has-submenu">
                <a href="javascript:void(0)">เลือกตั้ง <i class="fas fa-chevron-down"></i></a>
                <ul class="mobile-submenu">
                    <li><a href="election.html">ผู้สมัคร สส.</a></li>
                    <li><a href="policy.html">นโยบาย</a></li>
                </ul>
            </li>
            <li class="mobile-has-submenu">
                <a href="javascript:void(0)">เกี่ยวกับพรรค <i class="fas fa-chevron-down"></i></a>
                <ul class="mobile-submenu">
                    <li><a href="ideology.html">อุดมการณ์</a></li>
                    <li><a href="executives.html">ผู้บริหารพรรค</a></li>
                    <li><a href="announcements.html">ประกาศ</a></li>
                    <li><a href="https://drive.google.com/file/d/1qGXgxyuI_jM6k2DB67PjfeqEx4EQqDY0/view?usp=sharing" target="_blank">ข้อบังคับพรรค</a></li>
                </ul>
            </li>
            <li><a href="mps.html">สส.พรรค</a></li>
            <li><a href="member.html">ระบบสมาชิก</a></li>
        </ul>
    </div>

    <!-- Hero Section -->
    <section class="mps-hero">
        <div class="container">
            <h1>สมาชิกสภาผู้แทนราษฎรพรรคประชาภิวัฒน์</h1>
            <p>ติดตามผลงานและการอภิปรายของสมาชิกสภาผู้แทนราษฎรจากพรรคประชาภิวัฒน์</p>
        </div>
    </section>

    <!-- MPs Section -->
    <main class="container mps-section">
        <div id="error-container"></div>
        
        <div class="tabs mps-tabs">
            <button class="tab-btn tab-button active" data-tab="current-mps">สส.ปัจจุบัน</button>
            <button class="tab-btn tab-button" data-tab="former-mps">อดีตสส.</button>
            <button class="tab-btn tab-button" data-tab="debates">การอภิปราย</button>
        </div>
        
        <div id="current-mps" class="tab-content active">
            <h2>สมาชิกสภาผู้แทนราษฎรชุดปัจจุบัน</h2>
            <div class="mps-grid" id="current-mps-grid"></div>
        </div>
        
        <div id="former-mps" class="tab-content">
            <h2>อดีตสมาชิกสภาผู้แทนราษฎร</h2>
            <div class="mps-grid" id="former-mps-grid"></div>
        </div>
        
        <div id="debates" class="tab-content">
            <h2>การอภิปรายในสภาล่าสุด</h2>
            <div id="debates-list"></div>
        </div>
    </main>


    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>เกี่ยวกับพรรค</h3>
                    <ul>
                        <li><a href="ideology.html">อุดมการณ์</a></li>
                        <li><a href="executives.html">ผู้บริหารพรรค</a></li>
                        <li><a href="announcements.html">ประกาศพรรค</a></li>
                        <li><a href="https://drive.google.com/file/d/1qGXgxyuI_jM6k2DB67PjfeqEx4EQqDY0/view?usp=sharing" target="_blank">ข้อบังคับพรรค</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>กิจกรรม</h3>
                    <ul>
                        <li><a href="election.html">ผู้สมัคร สส.</a></li>
                        <li><a href="policy.html">นโยบาย</a></li>
                        <li><a href="activities.html">กิจกรรมพรรค</a></li>
                        <li><a href="volunteer.html">จิตอาสา</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>ติดต่อเรา</h3>
                    <address>
                        <p>สำนักงานใหญ่พรรคประชาภิวัฒน์</p>
                        <p>67 ถนนเศรษฐสิริ 2 แขวงพญาไท เขตพญาไท กรุงเทพฯ 10330</p>
                        <p>โทรศัพท์: -</p>
                        <p>อีเมล: info.peoples.reform@gmail.com</p>
                    </address>
                </div>
                <div class="footer-col">
                    <h3>ติดตามเรา</h3>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                    <div class="newsletter">
                        <h4>รับข่าวสารจากเรา</h4>
                        <form>
                            <input type="email" placeholder="อีเมลของคุณ">
                            <button type="submit">สมัคร</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 พรรคประชาภิวัฒน์ (People's Reform Party - PRT). สงวนลิขสิทธิ์ทุกประการ.</p>
            </div>
        </div>
    </footer>


    <script src="../js/script.js"></script>
    
    <script>
        // ฟังก์ชันหลักสำหรับดึงและแสดงข้อมูล
        async function loadData() {
          try {
            const response = await fetch('https://script.google.com/macros/s/AKfycbx4FXGqc7134cmsUOl6bWBkc-T68gc6evihz4pMLw01LDTtO2hcjkOqO9nXDYUlM9SR/exec');
            const data = await response.json();
            
            // ตรวจสอบก่อนว่า element มีอยู่จริง
            const lastUpdatedElement = document.getElementById('last-updated');
            if (lastUpdatedElement) {
              lastUpdatedElement.textContent = `อัปเดตล่าสุด: ${formatDateTime(data.updatedAt)}`;
            }
            
            // แสดงข้อมูลสส.ปัจจุบัน
            displayCurrentMPs(data.currentMps);
            
            // แสดงข้อมูลอดีตสส.
            displayFormerMPs(data.formerMps);
            
            // แสดงข้อมูลการอภิปราย
            displayDebates(data.debates);
            
          } catch (error) {
            console.error('เกิดข้อผิดพลาดในการโหลดข้อมูล:', error);
            showError('ไม่สามารถโหลดข้อมูลได้ กรุณาลองใหม่ในภายหลัง');
          }
        }
        
        // ฟังก์ชันแสดงข้อความผิดพลาด
        function showError(message) {
          const errorContainer = document.getElementById('error-container');
          if (errorContainer) {
            errorContainer.innerHTML = `
              <div class="alert alert-error">
                <i class="fas fa-exclamation-circle"></i> ${message}
              </div>
            `;
            errorContainer.style.display = 'block';
          }
        }
        
        // ฟังก์ชันสำหรับจัดการแท็บ
        function setupTabs() {
          const tabButtons = document.querySelectorAll('.tab-button');
          
          if (tabButtons.length > 0) {
            tabButtons.forEach(button => {
              button.addEventListener('click', function() {
                // เปลี่ยนแท็บที่ active
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                
                // แสดงเนื้อหาที่เกี่ยวข้อง
                const tabId = this.getAttribute('data-tab');
                document.querySelectorAll('.tab-content').forEach(content => {
                  content.style.display = 'none';
                });
                
                const activeTab = document.getElementById(tabId);
                if (activeTab) {
                  activeTab.style.display = 'block';
                }
              });
            });
            
            // เปิดแท็บแรกโดย default
            tabButtons[0].click();
          }
        }
        
        // โหลดข้อมูลเมื่อหน้าเว็บโหลดเสร็จ
        document.addEventListener('DOMContentLoaded', () => {
          // ตั้งค่าแท็บก่อน
          setupTabs();
          
          // แล้วจึงโหลดข้อมูล
          loadData();
        });
        
        // แสดงข้อมูลสส.ปัจจุบัน
        function displayCurrentMPs(mps) {
          const container = document.getElementById('current-mps-grid');
          container.innerHTML = '';
          
          if (!mps || mps.length === 0) {
            container.innerHTML = '<p class="no-data">ไม่พบข้อมูลสมาชิกสภาผู้แทนราษฎรชุดปัจจุบัน</p>';
            return;
          }
          
          mps.forEach(mp => {
            const card = createMPCard(mp);
            container.appendChild(card);
          });
        }
        
        // แสดงข้อมูลอดีตสส.
        function displayFormerMPs(mps) {
          const container = document.getElementById('former-mps-grid');
          container.innerHTML = '';
          
          if (!mps || mps.length === 0) {
            container.innerHTML = '<p class="no-data">ไม่พบข้อมูลอดีตสมาชิกสภาผู้แทนราษฎร</p>';
            return;
          }
          
          mps.forEach(mp => {
            const card = createMPCard(mp, true);
            container.appendChild(card);
          });
        }
        
        // สร้างการ์ดแสดงข้อมูลสส.
        function createMPCard(mp, isFormer = false) {
          const card = document.createElement('div');
          card.className = 'mp-card';
          
          let badge = '';
          if (isFormer) {
            badge = `<span class="mp-badge former">อดีตสส.</span>`;
          } else if (mp.ประเภท === 'แบ่งเขต') {
            badge = `<span class="mp-badge constituency">สส.เขต</span>`;
          } else {
            badge = `<span class="mp-badge party-list">สส.บัญชีรายชื่อ</span>`;
          }
          
          card.innerHTML = `
            <div class="mp-image-container">
              <img src="${mp.ภาพ || 'images/default-avatar.jpg'}" alt="${mp['ชื่อ-นามสกุล']}" class="mp-image">
              ${badge}
            </div>
            <div class="mp-info">
              <h3 class="mp-name">${mp['ชื่อ-นามสกุล']}</h3>
              ${mp.ประเภท === 'แบ่งเขต' ? `
                <p class="mp-constituency">
                  <i class="fas fa-map-marker-alt"></i> เขต ${mp.เขตเลือกตั้ง} ${mp.จังหวัด}
                </p>
              ` : ''}
              ${isFormer ? `
                <p class="mp-term">
                  <i class="fas fa-calendar-alt"></i> ${mp['ช่วงเวลาที่ดำรงตำแหน่ง']}
                </p>
              ` : ''}
              <div class="mp-actions">
                <button class="btn btn-profile" data-mp-id="${mp.รหัส}">
                  <i class="fas fa-user-circle"></i> ดูประวัติ
                </button>
                ${!isFormer ? `
                  <button class="btn btn-debates" data-mp-id="${mp.รหัส}">
                    <i class="fas fa-comments"></i> การอภิปราย
                  </button>
                ` : ''}
              </div>
            </div>
          `;
          
          return card;
        }
        
        // แสดงข้อมูลการอภิปราย
        function displayDebates(debates) {
          const container = document.getElementById('debates-list');
          container.innerHTML = '';
          
          if (!debates || debates.length === 0) {
            container.innerHTML = '<p class="no-data">ไม่พบข้อมูลการอภิปราย</p>';
            return;
          }
          
          // เรียงลำดับตามวันที่ (ใหม่สุดก่อน)
          debates.sort((a, b) => new Date(b.วันที่) - new Date(a.วันที่));
          
          debates.forEach(debate => {
            const debateItem = createDebateItem(debate);
            container.appendChild(debateItem);
          });
        }
        
        // สร้างรายการการอภิปราย
        function createDebateItem(debate) {
          const item = document.createElement('div');
          item.className = 'debate-card';
          
          item.innerHTML = `
            <div class="debate-header">
                <h3 class="debate-title">${debate.หัวข้อ}</h3>
                <span class="debate-date">${formatDate(debate.วันที่)}</span>
            </div>
            <div class="debate-mp">โดย: ${debate['ชื่อ-นามสกุล']}</div>
            <div class="debate-tags">
              ${debate.ป้ายกำกับ.split(',').map(tag => `
                <span class="tag">${tag.trim()}</span>
              `).join('')}
            </div>
            <p class="debate-excerpt">"${debate.เนื้อหาสรุป}"</p>
            <div class="watch-btn">
              <a href="${debate.ลิงก์วิดีโอ || '#'}" class="btn btn-watch" target="_blank">
                <i class="fas fa-play"></i> ดูเพิ่มเติม
              </a>
            </div>
          `;
          
          return item;
        }
        
        // ฟังก์ชันช่วยเหลือสำหรับการจัดรูปแบบวันที่
        function formatDate(dateString) {
          if (!dateString) return 'ไม่ทราบวันที่';
          const options = { year: 'numeric', month: 'long', day: 'numeric' };
          return new Date(dateString).toLocaleDateString('th-TH', options);
        }
        
        function formatDateTime(datetimeString) {
          if (!datetimeString) return 'ไม่ทราบวันเวลา';
          const options = { 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
          };
          return new Date(datetimeString).toLocaleDateString('th-TH', options);
        }
        
        // แสดงข้อความผิดพลาด
        function showError(message) {
          const errorContainer = document.getElementById('error-container');
          errorContainer.innerHTML = `
            <div class="alert alert-error">
              <i class="fas fa-exclamation-circle"></i> ${message}
            </div>
          `;
          errorContainer.style.display = 'block';
        }
        
        // โหลดข้อมูลเมื่อหน้าเว็บโหลดเสร็จ
        document.addEventListener('DOMContentLoaded', () => {
          loadData();
          
          // การจัดการเหตุการณ์สำหรับแท็บ
          document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', function() {
              // เปลี่ยนแท็บที่ active
              document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
              this.classList.add('active');
              
              // แสดงเนื้อหาที่เกี่ยวข้อง
              const tabId = this.getAttribute('data-tab');
              document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
              });
              document.getElementById(tabId).style.display = 'block';
            });
          });
        });
    </script>
</body>
</html>
